<!DOCTYPE html>
<html>
  <head>
    <title>Page Title</title>
    <style>
      #map {
        width: 100%;
        height: 400px;
      }
    </style>
    <script>
      var map, marker, coords;
      function initMap() {
        var longField = Number(document.getElementById('longField').textContent);
        var latField  = Number(document.getElementById('latField').textContent);
        coords = { lat: latField, lng: longField };
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: coords
        });
        showMarker();
      }

      function showMarker(icon) {
        if (marker) {
          marker.setMap(null);
          marker = null;
        }
        if (!icon) {
          marker = new google.maps.Marker({
            position: coords,
            map: map
          });
        }
        else {
          console.log("WOw");
          marker = new google.maps.Marker({
            position: coords,
            map: map,
            icon: icon
          });
        }
      }

      function changeIcon(value) {
        if (value == 1) {
          showMarker();
        }
        else if (value == 2) {
          showMarker('https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png');
        }
      }
    </script>
  </head>
  <body>
    <h1>{{formatted_address}}</h1>
    <h2><strong>Longitude:</strong><span id="longField">{{longitude}}</span></h2>
    <h2><strong>Latitude:</strong><span id="latField">{{latitude}}</span></h2>
    <select onchange="changeIcon(this.value)" name="selectIcon">
      <option value="1">Default Marker</option>
      <option value="2">Beach Flag</option>
    </select>
    <br>
    <br>
    <div id="map"></div>
  </body>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk0vApjUjq1RfkFxr3_p85VdGU3b6u7QM&callback=initMap">
  </script>
</html>
